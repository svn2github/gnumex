<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head>
  
  <meta http-equiv="content-type" content="text/html; charset=US-ASCII" />
  <meta name="date" content="2013-11-09 01:12:12 -0600" />
  <meta name="author" content="Jason Nicholson" />
  <meta name="description" content="Compile matlab mex files with gcc on Windows Platforms" />
  <meta name="keywords" content="Gnumex" lang="en" /><title>Gnumex - Documentation</title>
  
  <link rel="stylesheet" type="text/css" href="gnumex.css" /></head><body>
<div id="top-menu" class="menu">
<table class="menu" summary="Menus">
  <tbody>
    <tr>
      <td style="width: 90px;" class="menu" rowspan="2"> <br />
      </td>
      <td class="menu" style="padding-top: 0.9em;"> <big class="menu">Gnumex</big><small class="menu"> - Compile matlab mex files with gcc on Windows Platforms</small>
      </td>
    </tr>
    <tr>
      <td class="menu"> <a href="index.html" class="menu">Home</a> &nbsp;&nbsp;&nbsp;
 <a href="contributors.html" class="menu">Contributors</a> &nbsp;&nbsp;&nbsp;
 <a href="documentation.html" class="menu">Documentation</a> &nbsp;&nbsp;&nbsp;
 <a href="http://sourceforge.net/p/gnumex/files/" class="menu">Download</a> &nbsp;&nbsp;&nbsp;
 <a href="FAQ.html" class="menu">FAQ</a> &nbsp;&nbsp;&nbsp;
 <a href="http://sourceforge.net/p/gnumex/bugs" class="menu">Bugs</a> &nbsp;&nbsp;&nbsp;
 <a href="http://sourceforge.net/p/gnumex/mailman" class="menu">Mailing Lists</a> &nbsp;&nbsp;&nbsp;
 <a href="http://sourceforge.net/p/gnumex/code" class="menu">Code</a> &nbsp;&nbsp;&nbsp;
      <a href="links.html" class="menu">Links</a> </td>
    </tr>
  </tbody>
</table>
</div>

<div id="content">
<div class="section">
<h2>Documentation</h2>
<h2>Table of Contents here</h2>
<br />
<br />
<h3>Preface and Background<br />
</h3>
<p>A knowledge of MATLAB is necessary.&nbsp; A knowledge of simple
compilation of C, C++, or Fortran is helpful.&nbsp; Also, if you have
worked with MinGW, MinGW-w32, or MinGW-w64 that is helpful.<br />
</p>
<p>The main attractions for using GCC for Windows over other compilers
is the following:</p>
<ol>
  <li>GCC is free as no money and free as in speech.</li>
  <li>Gfortran is the only Fortran compiler on windows that is
free.&nbsp; The only other option with MATLAB seems to be the Intel
Fortran compiler.<br />
  </li>
  <li>Compiling with GCC may allow the same source file to be used on
both Unix and Windows operating systems.</li>
</ol>
There are two main approaches with GCC on Windows signified by Cygwin
and <span style="font-style: italic;">Min</span>imalist <span style="font-style: italic;">G</span>CC for <span style="font-style: italic;">W</span>indows
(MinGW).&nbsp; MinGW approach is to link to Microsoft run-time
libraries, which result in fast executables, but restricts
compatibility with GCC on Unix.&nbsp; In contrast, Cygwin GCC links to
a dynamic link library, cygwin1.dll, which provides a Unix style API
that allows access to many more Unix routines than the Microsoft
run-time libraries.&nbsp; Cygwin is often slower but has better
compatibility.&nbsp; Cygwin1.dll is required on the PATH when calling
your executable or library. See the <a href="http://sources.redhat.com/cygwin/faq/faq_toc.html">Cygwin FAQ</a>
for more on the Cygwin API and how the Unix emulation works.&nbsp; <br />
<br />
To make matters more complicated, MinGW-w64 is a different project than
MinGW.&nbsp; MinGW-w64 forked
the MinGW code and added 64 bit support.&nbsp; However, the MinGW-w64
project has support for both 32 bit and 64
compiling on Windows but MinGW only supports 32 bit. <br />
<br />
As an added complication, you can also do MinGW compiles using the
Cygwin tools, i.e. use the Cygwin tools to link to the Microsoft
libraries. This is achieved by passing a flag to the Cygwin gcc,
-mno-cygwin. This is refered to as Cygwin/mingw compiling. There are
some problems with this option. The old gnumex utilities do
support Cygwin-mingw compiles, however it is strongly suggested to use
MinGW
instead. <br />
<br />
Note that Cygwin does not play well with MATLAB.&nbsp; If you use
Cygwin without -mno-cygwin flag, only GCC 3.2 or below works.&nbsp; The
-mno-cygwin flag is deprecated.&nbsp; Reports of Cygwin crashing MATLAB
are common on the mailing list.&nbsp; Therefore, MinGW or
MinGW-w64 is recommended.&nbsp; Support for cygwin updates will no
longer be made
after Gnumex 2.05.&nbsp; If you need Gnumex to use Cygwin, then use an
older version of Gnumex.<br />
<h4>Prerequisite: Installing MinGW or MinGW-w64</h4>
<p>Configuring Gnumex requires either MinGW or MinGW-w64 to be
installed first.&nbsp; Cygwin is
no longer supported.&nbsp; No further updates will be made for Cygwin.<br />
</p>
<p>There are muliple flavors of MinGW and MinGW-w64.&nbsp; Two
different links to different MinGW-w64 projects are in the <a href="links.html">Links</a>
section as examples that contributors have used.&nbsp; If you plan to
work with 32 bit MATLAB, get the 32 bit compiler.&nbsp; For 64 bit
MATLAB, get a 64 bit compiler.&nbsp; <br />
</p>
<p>&nbsp; As an example, here is instructions for the compiler from
TDM-GCC:</p>
    <ol>
      <li>Download TDM-GCC package from <a href="http://tdm-gcc.tdragon.net/">here</a>.&nbsp; If you have 32bit
MATLAB, get the 32 bit TDM-GCC package.&nbsp; If you have 64bit MATLAB
get the 64bit version.<br />
      </li>
      <li>Run the installer and follow the instructions.&nbsp; Install
to the
default location of TDM-GCC-32 or TDM-GCC-64. Please note that the
installer modifies
the PATH environmental variable (if you don't know what this is, google
"windows environmental variable").</li>
      <li>That's it.&nbsp; Nothing to it.<br />
      </li>
    </ol>
<h3>Installing and Setting Up Gnumex</h3>
  <ol>
    <li>Obtain the latest version of Gnumex from the <a href="https://sourceforge.net/projects/gnumex/files/">Download</a>
section.</li>
    <li>Unpack the archive (using tar, winzip, whatever) into a
directory of your choice - say ...\Documents\gnumex. You now have: a Matlab
install routine, gnumex.m; a couple of mex file supporting routines
(shortpath.dll, uigetpath.dll); a hacked version of the windows dll
utility, dlltool (<a href="dlltool.html">click to see issue with dlltool</a>), and some perl
scripts.</li>
    <li>To
setup Gnumex, run the gnumex script from the install directory (e.g
...\Documents\gnumex).&nbsp; A Matlab figure window comes up, with
a variety of options, which should look a little like this:<br />
      <img style="width: 669px; height: 578px;" alt="Gnumex dialog" title="Gnumex MATLAB dialog" src="gnumex.png" /></li>
    <li>Fill
in the dialog window and then click "Make options file."&nbsp; Gnumex
will use all of the filled information to generate a newbatch file that Matlab can use to mex code. </li></ol><span class="option"></span>f<br />
<br />
<ol>
  <li>The 1st edit box should point to the root directory of MingW.
Set this if you have installed MingW. The "Path to gnumex file
utilities" edit box sets the directory with the gnumex files (default -
the current working directory). There is also an edit box for the name
of the options bat file to be created. You might want to leave this as
the default, which is Matlab's default mexopts location for your system
or account.<br /><br />
    </li>
  <li>Select MinGW in the "Environment/linking type" box.&nbsp; A
second list box selects whether the opt file is for creating mex files
(dlls), or standalone Matlab engine exe files. The default is Mex dll.
The third box specifies the language for the compile (C/C++ or
fortran). There is also a list box selecting Safe or Quick compiles;
this has an associated precompiled library directory edit box. For the
moment, leave the list box at it's default value.&nbsp; <br />

    </li>
</ol>
<ul>
  <li>MinGW root directory (maybe blank): This should point to the base directory of MinGW or MinGW-w64. For example, C:\TDM-GCC-64</li>
  <li>Cygwin root directory (or blank): This is the base folder of Cygwin.&nbsp; Often C:\cygwin .<br />
  </li>
  <li>Path to g95.exe (or blank):&nbsp;&nbsp; This is the folder that g95.exe is located.&nbsp; For instance, C:\TDM-GCC-64\bin .<br />
  </li>
  <li>Path to gfortran.exe (or blank): This is the folder containing gfortran.&nbsp; For instance, C:\TDM-GCC-64\bin .</li>
  <li>Path to gnumex utilities: This where the install directory of gnumex is located.</li>
  <li>Environment / linking type: Available options are MinGW, Cygwin,
and -mno-cygwin.&nbsp; The -mno-cygwin option is deprecated in current
versions of Cygwin.&nbsp; Only Cygwin up to gcc 3.2 is supported.&nbsp;
Please use the old documentation to find out how to use the correct
ancient Cygwin package <a href="oldDocumentation/index.html">here</a>.<br />
  </li>
  <li>Generate mex ddl or engine exe? :&nbsp; Creating mex files (dlls)
or standalone Matlab engine exe files. The default is Mex
dll.&nbsp;&nbsp; The the Matlab documentation for more information.</li>
  <li>Language for compilation: Specify which of supported compilers
for different fortran and C/C++ compilers to use.&nbsp; The available
options are&nbsp; Fortran 77,&nbsp; Fortran&nbsp; 95 (g95),&nbsp;
Fortran&nbsp; 95&nbsp; (gfortran). <br />
  </li>
  <li>Add stub (yes if WIndows 95/98)? : <span style="font-weight: bold;"></span>This no longer used.&nbsp; Your selection does not matter.<br />
  </li>
  <li>Optimization level: -O1, -O2, -03, and -mtune=native are
available.&nbsp; The larger the number, the higher the level of
optimization but error are harder to trace.&nbsp; For debugging,
disable optimization.&nbsp; For imformation on the different levels,
see <a href="http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html">Optimization Options in GCC</a>.&nbsp;
-mtune=native tunes the generated code based on the processor family
type of the compiling machine.&nbsp; For more information on
-mtune=native, see <a href="http://gcc.gnu.org/onlinedocs/gcc/i386-and-x86_002d64-Options.html#i386-and-x86_002d64-Options">Intel 386 and AMD x86-64 Options</a> in the GCC documentation.<br />
  </li>
  <li>Path for libraries and .def files: The directory in which the .lib<br />
  </li>
</ul>
<ol>
</ol>

<h3>Usage<br />
</h3>
<p>content</p>
<h3>Tips<br />
</h3>
<br />
<div id="sf_logo"> <a href="http://sourceforge.net/"><img src="http://sourceforge.net/sflogo.php?group_id=2888&amp;type=1" style="border: 0pt none ;" alt="SourceForge.net Logo" height="31" width="88" /></a>
</div>
</div>
</div>

</body></html>